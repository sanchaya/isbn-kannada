(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5508:function(e,t,s){Promise.resolve().then(s.bind(s,2241))},2241:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437);s(1068);var a=s(2265),o=s(4010),l=s(8031);s(1109);var c=s(2536),n=s.n(c);function i(){let e=(0,a.useRef)(null),[t,s]=(0,a.useState)(),[c,i]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[u,m]=(0,a.useState)(""),[x,p]=(0,a.useState)([]),[g,b]=(0,a.useState)(!0),[f,j]=(0,a.useState)(1),[N,y]=(0,a.useState)(0);(0,a.useEffect)(()=>{S()},[]);let v=(0,a.useMemo)(()=>[{Header:"S.No",accessor:(e,t)=>t+1},{Header:"Book Title",accessor:"title"},{Header:"ISBN",accessor:"isbn"},{Header:"Language",accessor:"language"},{Header:"Publisher",accessor:"publisher"},{Header:"Author/Editor Name",accessor:"author_editor"},{Header:"Date",accessor:e=>{let t=e.Date;return t?new Date(t).getFullYear():""}}],[]),S=async()=>{try{console.log("call",f);let e=await fetch("http://localhost:4021/books/viewbooks?page=".concat(f));e.ok||console.error("HTTP error! Status: ".concat(e.status));let t=await e.json();s(t)}catch(e){j(e=>e),console.error("Error fetching data:",e.message)}},w=()=>{console.log("fetch more"),S().then()};(0,a.useEffect)(()=>{t&&(i(e=>{let s=[...e,...t.data];return Array.from(new Set(s.map(JSON.stringify))).map(JSON.parse)}),b(t.currentPage<t.totalPages),j(t.currentPage+1))},[t]);let{getTableProps:k,getTableBodyProps:H,headerGroups:E,rows:P,prepareRow:T}=(0,o.useTable)({columns:v,data:0!==d.length?d:c},o.useSortBy),C=async()=>{try{let e=await fetch("http://localhost:4021/books/count");e.ok||console.error("HTTP error! Status: ".concat(e.status));let t=await e.json();y(t),console.log(t)}catch(e){console.error("Error fetching Data",e)}};(0,a.useEffect)(()=>{C()},[]);let _=()=>{let t=e.current;console.log("elecmet"),(t.scrollHeight-t.scrollTop).toFixed(0)-5<t.clientHeight&&g&&w()};return(0,a.useEffect)(()=>{let t=e.current;if(t)return t.addEventListener("scroll",_),()=>{t.removeEventListener("scroll",_)}}),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{marginTop:"50px"},ref:e,className:"h-[90vh] overflow-x-auto",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[(0,r.jsxs)("div",{className:"mb-4 w-50 mx-auto input-group",children:[(0,r.jsx)("input",{type:"text",placeholder:"Enter ISBN",className:"form-control mx-auto w-50",value:u,onChange:e=>m(e.target.value)}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>{n().get("http://localhost:4021/books/find/".concat(u)).then(e=>{console.log(e.data);let t=e.data;h(t?[t]:[])}).catch(e=>{console.error("Error fetching data:",e)})},children:(0,r.jsx)(l.Goc,{})}),u&&(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>{m(""),h([])},children:(0,r.jsx)(l.czh,{})})]}),(0,r.jsx)("div",{className:" ",children:(0,r.jsxs)("table",{...k(),className:"table table-bordered table-hover",style:{maxWidth:"100%"},children:[(0,r.jsx)("thead",{className:"sticky top-0",children:E.map((e,t)=>(0,r.jsx)("tr",{...e.getHeaderGroupProps(),children:e.headers.map((e,t)=>(0,r.jsxs)("th",{...e.getHeaderProps(e.getSortByToggleProps()),className:"px-2 py-2 text-sm sm:text-base bg-primary text-white",children:[e.render("Header"),e.isSorted&&(0,r.jsx)("span",{children:e.isSortedDesc?" ⬇️ ":" ⬆️ "})]},t))},t))}),(0,r.jsx)("tbody",{...H(),children:P.map((e,t)=>(T(e),(0,r.jsx)("tr",{...e.getRowProps(),children:e.cells.map((e,t)=>(0,r.jsx)("td",{...e.getCellProps(),className:"px-3 py-2 text-sm sm:text-base",children:e.render("Cell")},t))},t)))})]})}),(0,r.jsx)("button",{onClick:()=>{let t=e.current;t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},className:"btn btn-secondary fixed bottom-10 right-2",children:(0,r.jsx)(l.OrA,{className:'{"h-5 w-5"}'})}),(0,r.jsx)("button",{onClick:()=>{let t=e.current;t&&t.scrollTo({top:0,behavior:"smooth"})},className:"btn btn-secondary fixed bottom-20 right-2",children:(0,r.jsx)(l.jRD,{className:'{"h-5 w-5"}'})}),(0,r.jsxs)("div",{className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-primary text-white rounded-full py-2 px-4 shadow-lg",children:["Total Books: ",N]})]})})})}}},function(e){e.O(0,[614,344,642,971,938,744],function(){return e(e.s=5508)}),_N_E=e.O()}]);